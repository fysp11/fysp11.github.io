---
import Layout from '@/layouts/Layout.astro';
import ProjectsView from '@/components/ProjectsView.tsx';

import { getCollection, type CollectionEntry } from 'astro:content';

const allProjects = await getCollection("projects");
const activeProjects = allProjects.filter((p: CollectionEntry<'projects'>) => p.data.active);

const projects = activeProjects.map((p: CollectionEntry<'projects'>) => ({
  name: p.data.title,
  href: `/projects/${p.slug}`,
  image: p.data.heroImage,
  description: p.data.description
}));
---

<Layout title="Projects">
  <ProjectsView projects={projects} client:load />
</Layout>
