---
import Layout from '@/layouts/Layout.astro';
import ProjectsView from '@/components/ProjectsView.tsx';

import { type CollectionEntry } from 'astro:content';
import { getProjects } from '@/server/data';

const activeProjects = await getProjects();

const projects = activeProjects.map((p: CollectionEntry<'projects'>) => ({
  name: p.title,
  href: `/projects/${p.slug}`,
  image: p.heroImage,
  description: p.description
}));
---

<Layout title="Projects">
  <ProjectsView projects={projects} client:load />
</Layout>
